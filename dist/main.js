(()=>{"use strict";function e(){return{city:"No city found",temp:0,weather:"404 error",weather_desc:"No city found",min_temp:0,max_temp:0,humidity:0,lat:0,lon:0}}async function t(e){let t="https://api.unsplash.com/photos/random";t+="?orientation=landscape",t+="&count=1",t+="&client_id=yzaA27Bnm-RKqmb9ud2qC1imujfvoCREjcqG23C4ca0",t+="&query="+e;const n=await fetch(t,{method:"GET",headers:{"Accept-Version":"v1"}}),[a]=await n.json();return a.urls.regular}async function n(){const n=document.getElementById("city-name");let a;if(""===n.value)n.classList.add("warning");else{n.classList.remove("warning"),a=await async function(e){let t="https://api.openweathermap.org/data/2.5/weather";t+="?q="+e,t+="&appid=acb20f9ff5d6a288ecb4800af4426da3";const n=await fetch(t);return{city:(a=await n.json()).name,temp:a.main.temp,weather:a.weather[0].main,weather_desc:a.weather[0].description,min_temp:a.main.temp_min,max_temp:a.main.temp_max,humidity:a.main.humidity,lat:a.coord.lat,lon:a.coord.lon};var a}(n.value.toLowerCase()).catch(e),a=function(e){switch(document.getElementById("temp-units").value){case"C":e.temp=Math.round(e.temp-273.15),e.max_temp=Math.round(e.max_temp-273.15),e.min_temp=Math.round(e.min_temp-273.15);break;case"F":e.temp=Math.round(1.8*e.temp-459.67),e.max_temp=Math.round(1.8*e.max_temp-459.67),e.min_temp=Math.round(1.8*e.min_temp-459.67)}return e}(a),function(e){const t=document.getElementById("general-info"),n=document.getElementById("city"),a=document.getElementById("coord"),m=document.getElementById("main-temp"),i=document.getElementById("weather"),o=document.getElementById("temp-units");n.innerText=e.city,a.innerText=`(LAT: ${e.lat} 째N, LON: ${e.lon} 째W)`,m.innerText=`Temperature: ${e.temp} 째${o.value}`,i.innerText=e.weather_desc,t.classList.remove("hide")}(a),function(e){const t=document.getElementById("forecast-info"),n=document.getElementById("temp-units"),a=document.createElement("div"),m=document.createElement("h2"),i=document.createElement("ul"),o=["max_temp","min_temp","humidity"];!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(t),a.classList.add("data-board"),m.innerText=e.weather;for(let t=0;t<o.length;t+=1){const a=document.createElement("li");a.innerText=`${o[t]}: ${e[o[t]]}`,a.innerText+=t<2?" 째"+n.value:"%",i.appendChild(a)}a.append(m,i),t.appendChild(a)}(a);let m="",i="";"404 error"===a.weather?(m="https://images.unsplash.com/photo-1579373903781-fd5c0c30c4cd?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1267&q=80",i="https://images.unsplash.com/photo-1559144098-968b3904ca68?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1349&q=80"):(m=await t(n.value.toLowerCase()+" city"),i=await t(a.weather)),function(e,t){const n=document.getElementById("general-info"),a=document.getElementById("forecast-info");n.style.backgroundImage=`url(${e})`,a.style.backgroundImage=`url(${t})`}(m,i)}}document.getElementById("send-button").addEventListener("click",n),document.getElementById("temp-units").addEventListener("change",n)})();